/* =========================
   DIALOGS / FORMS
   ========================= */
dialog{
  border:1px solid var(--border); border-radius:18px;
  background: linear-gradient(180deg, color-mix(in oklab, var(--card) 88%, transparent), var(--card));
  color:var(--text); width:min(980px,calc(100% - 24px)); padding:0;
  box-shadow:0 30px 80px var(--shadow);
}
dialog::backdrop{ background:rgba(0,0,0,.45) }
.dlg-head{ display:flex; align-items:center; justify-content:space-between; border-bottom:1px solid var(--border); padding:12px 14px }
.dlg-grid{ display:grid; grid-template-columns:1.2fr 1fr; gap:14px; padding:14px }
.row{ display:grid; grid-template-columns:repeat(2,1fr); gap:12px }

.photoDrop{
  border:2px dashed var(--border); border-radius:14px; padding:12px;
  text-align:center; display:flex; flex-direction:column; gap:10px; align-items:center; justify-content:center;
  min-height:180px; background:repeating-linear-gradient(45deg,#0000 0 6px,#ffffff08 6px 12px)
}
.photoDrop.drag{ border-color:var(--accent); background:rgba(24,212,123,.08) }
.photoPreview{ width:100%; max-height:260px; object-fit:contain; border-radius:10px; border:1px solid var(--border); background:#0001; box-shadow:0 12px 28px var(--shadow) }

/* =========================
   SETTINGS DROPDOWNS (collapsed + popup options)
   ========================= */
#dlgSettings select{
  appearance:none; -webkit-appearance:none;
  color:var(--opt-text); background:var(--opt-bg);
  border:1px solid var(--border); border-radius:var(--radius-sm);
  padding:.5rem .75rem; padding-right:2rem;
  line-height:1.2;
  box-shadow:0 1px 0 rgba(0,0,0,.15);
  background-image:
    linear-gradient(to bottom, transparent, transparent),
    url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='14' height='14' viewBox='0 0 24 24' fill='none' var(--opt-arrow) stroke-width='2' stroke-linecap='round' stroke-linejoin='round'><polyline points='6 9 12 15 18 9'/></svg>");
  background-repeat:no-repeat, no-repeat;
  background-position:right .6rem center, right .6rem center;
  background-size:1rem, 1rem;
}
:root.light #dlgSettings select{
  background-image:
    linear-gradient(to bottom, transparent, transparent),
    url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='14' height='14' viewBox='0 0 24 24' fill='none' stroke='%236c7a8e' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'><polyline points='6 9 12 15 18 9'/></svg>");
}
:root.hc #dlgSettings select{
  background-image:
    linear-gradient(to bottom, transparent, transparent),
    url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='14' height='14' viewBox='0 0 24 24' fill='none' stroke='%239bd0ff' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'><polyline points='6 9 12 15 18 9'/></svg>");
}

/* Focus ring */
#dlgSettings select:focus{ outline:2px solid var(--ring); outline-offset:2px }

/* Popup options */
#dlgSettings select option{ color:var(--opt-text); background:var(--opt-bg) }
#dlgSettings select option:hover{ background:var(--opt-hover) }
#dlgSettings select option:checked{ background:var(--opt-active); color:var(--opt-active-text) }
#dlgSettings select option:disabled{ color:var(--muted); background:var(--opt-bg) }

/* Old IE/Edge */
#dlgSettings select::-ms-expand{ display:none }

/*
 * Global <select> option styling
 *
 * Without explicit styling most browsers render option elements with a
 * light background, which results in unreadable white-on-white text
 * when the app is in dark mode.  To improve contrast and ensure
 * accessibility, we specify a dark background and proper text colour
 * for all option elements outside of the Settings dialog.  The
 * existing rules scoped to #dlgSettings remain more specific and
 * therefore override these defaults within that dialog.
 */
select option{
  /* Use !important to override native styles and fix dark mode contrast issues */
  background: var(--card) !important;
  color: var(--text) !important;
}
select option:hover{
  background: var(--opt-hover) !important;
}
select option:checked{
  background: var(--opt-active) !important;
  color: var(--opt-active-text) !important;
}
