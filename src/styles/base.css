/* =========================
   BASE / LAYOUT
   ========================= */
*{ box-sizing:border-box }
html,body{ height:100% }
.right{ text-align:right }

body{
  margin:0;
  font:14px/1.5 system-ui, Segoe UI, Roboto, Helvetica, Arial, sans-serif;
  color:var(--text);
  background: var(--bg);
  background:
    radial-gradient(1200px 800px at 10% -10%, #1a2333 0%, transparent 60%),
    radial-gradient(1200px 800px at 120% 10%, #18281f 0%, transparent 55%),
    linear-gradient(180deg,var(--bg),var(--bg2));
}

/* Smooth theme transitions */
body,header,.card,input,select,textarea,button,table,dialog{
  transition:
    background-color .25s,
    color .25s,
    border-color .25s,
    box-shadow .25s;
}

/* Header */
header{
  position:sticky; top:0; z-index:12;
  background: color-mix(in oklab, var(--bg2) 86%, transparent);
  border-bottom:1px solid var(--border);
  display:flex; align-items:center; gap:12px; padding:12px 16px;
  backdrop-filter:saturate(1.2) blur(10px);
}
header h1{ font-size:18px; margin:0 8px 0 0; letter-spacing:.3px }
header::after{
  content:""; position:absolute; inset:auto 0 0; height:2px; opacity:.9;
  background:linear-gradient(90deg,var(--accent),var(--accent-2));
}
.spacer{ flex:1 }

.grid{ display:grid; grid-template-columns:1fr 440px; gap:16px; padding:16px; align-items:start }

/* =========================
   TEXT SELECTION & CARET
   ========================= */
::selection{ background:var(--sel-bg); color:var(--sel-fg) }
::-moz-selection{ background:var(--sel-bg); color:var(--sel-fg) }
input::selection, textarea::selection, [contenteditable="true"]::selection{ background:var(--sel-bg); color:var(--sel-fg) }
input::-moz-selection, textarea::-moz-selection, [contenteditable="true"]::selection{ background:var(--sel-bg); color:var(--sel-fg) }
input, textarea, [contenteditable="true"]{ caret-color:var(--caret) }

/* =========================
   OS HIGH CONTRAST / FORCED COLORS (system-driven)
   ========================= */
@media (forced-colors: active){
  *{ forced-color-adjust:auto }

  body, .card, dialog, input, select, textarea, button {
    background: Canvas;
    color: CanvasText;
    border-color: ButtonBorder;
  }
  :focus{ outline:2px solid Highlight; outline-offset:2px }
  ::selection, ::-moz-selection{ background: Highlight; color: HighlightText }

  #dlgSettings select{ background-image:none } /* use native arrow */
  #dlgSettings select option:hover,
  #dlgSettings select option:checked{
    background: Highlight; color: HighlightText;
  }
}
